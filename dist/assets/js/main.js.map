{"version":3,"sources":["infinityScroll.js","post.js"],"names":["let","currentPage","isFetching","hasMore","lastImage","root","document","querySelector","async","fetchData","data","await","fetch","json","console","log","length","forEach","image","div","createElement","classList","add","innerHTML","Date","toLocaleString","download_url","appendChild","window","location","href","body","lastElementChild","observeLastImage","error","observer","IntersectionObserver","entries","isIntersecting","unobserve","threshold","observe","downloadImage","url","filename","then","response","blob","a","URL","createObjectURL","download","click","removeChild","catch","preview","getElementById","previewImgs","dragNdrop","event","files","target","Array","from","file","reader","FileReader","onload","e","base64Image","result","previewImg","push","setAttribute","readAsDataURL","drag","parentNode","className","drop","savePostToLocalStorage","post","posts","JSON","parse","localStorage","getItem","setItem","stringify","displayPost","add_post_container","style","display","dataset","id","postContent","user","profileImage","name","date","content","images","imgSrc","deletePost","postId","filter","postElement","remove","loadPostsFromLocalStorage","sort","b","querySelectorAll","anchor","addEventListener","preventDefault","clickedAnchorId","fetchingApi","video","mediaDevices","navigator","muted","getUserMedia","audio","srcObject","stream","play","alert","onclick","inputValue","value","now","toISOString","emojiSelector","toggle","res","loadEmoji","selectedEmoji","emoji","li","textContent","character","inputField","settingsMenu","darkBtn","settingsMenuToggle","urlReview","$","get","q","format","env","done","xml","html","find","text","title","undefined","description","attr","domain","toString","split","review","keydown","setTimeout","val","match","css"],"mappings":"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","file":"main.js","sourcesContent":["let currentPage = 1;\r\nlet isFetching = false;\r\nlet hasMore = true;\r\nlet lastImage;\r\nconst root = document.querySelector('.fb_body');\r\n\r\nasync function fetchData() {\r\n    if (isFetching || !hasMore) return;\r\n\r\n    isFetching = true;\r\n    try {\r\n        const response = await fetch(`https://picsum.photos/v2/list?page=${currentPage}&limit=10`);\r\n        const data = await response.json();\r\n        console.log(data);\r\n\r\n        if (data.length === 0) {\r\n            hasMore = false;\r\n            return;\r\n        }\r\n\r\n        data.forEach(image => {\r\n            const div = document.createElement('div');\r\n            div.classList.add(\"add_post_scrolling\");\r\n            div.innerHTML = `\r\n            <div class=\"post_col\">\r\n                <div class=\"post_row\">\r\n                    <div class=\"user_profile\">\r\n                        <img src=\"assets/images/5.jpg\" alt=\"Profile Picture\">\r\n                        <div>\r\n                            <p>Sajeda Jomaa</p>\r\n                            <small>${new Date().toLocaleString()}<small>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <p>Lorem ipsum dolor sit amet consectetur,</p>\r\n                <div class=\"post_image_container\">\r\n                    <img class=\"post_img\" src=\"${image.download_url}\" alt=\"Post Image\">\r\n                </div>\r\n                <div class=\"post_row\">\r\n                    <div class=\"activity_icon\">\r\n                        <div><img src=\"assets/images/like-blue.png\" alt=\"Like\">290</div>\r\n                        <div><img src=\"assets/images/comments.png\" alt=\"Comments\">98</div>\r\n                        <div><img src=\"assets/images/share.png\" alt=\"Share\">9834</div>\r\n                    </div>\r\n                    <div class=\"post_profile_icon\">\r\n                        <img src=\"assets/images/5.jpg\" alt=\"Profile Pic\"> <i class=\"fa fa-caret-down\"></i>\r\n                    </div>\r\n                </div></div>`;\r\n            // if (window.location.href === 'http://localhost:8000/userProfile.html') {\r\n\r\n            // document.body.querySelector('.post_col').appendChild(div);\r\n\r\n            // } else {\r\n            root.appendChild(div);\r\n            // }\r\n        });\r\n        if (window.location.href === 'http://localhost:8000/userProfile.html') {\r\n            lastImage = document.body.querySelector('.post_col').lastElementChild;\r\n            currentPage++;\r\n            observeLastImage();\r\n\r\n        } else {\r\n            lastImage = root.lastElementChild;\r\n            currentPage++;\r\n            observeLastImage();\r\n        }\r\n\r\n    } catch (error) {\r\n        console.error('Error fetching data:', error);\r\n    } finally {\r\n        isFetching = false;\r\n    }\r\n}\r\n\r\nfunction observeLastImage() {\r\n    const observer = new IntersectionObserver((entries) => {\r\n        if (entries[0].isIntersecting && !isFetching && hasMore) {\r\n            observer.unobserve(lastImage);\r\n            fetchData();\r\n        }\r\n    }, { threshold: 0.01 });\r\n\r\n    if (lastImage) {\r\n        observer.observe(lastImage);\r\n    }\r\n}\r\n\r\nfunction downloadImage(url, filename) {\r\n    fetch(url)\r\n        .then(response => response.blob())\r\n        .then(blob => {\r\n            const a = document.createElement('a');\r\n            a.href = URL.createObjectURL(blob);\r\n            a.download = filename;\r\n            document.body.appendChild(a);\r\n            a.click();\r\n            document.body.removeChild(a);\r\n        })\r\n        .catch(error => console.error('Download failed:', error));\r\n}\r\n\r\nfetchData();\r\n\r\n","\"use strict\";\r\n\r\nlet preview = document.getElementById(\"preview\");\r\nlet previewImgs = [];\r\n\r\nfunction dragNdrop(event) {\r\n    let files = event.target.files;\r\n    if (files.length > 0) {\r\n        Array.from(files).forEach(file => {\r\n            let reader = new FileReader();\r\n            reader.onload = function (e) {\r\n                let base64Image = e.target.result;\r\n                previewImgs.push(base64Image);\r\n\r\n                let previewImg = document.createElement(\"img\");\r\n                previewImg.setAttribute(\"src\", base64Image);\r\n                preview.appendChild(previewImg);\r\n            };\r\n            reader.readAsDataURL(file);\r\n        });\r\n    }\r\n}\r\n\r\nfunction drag() {\r\n    document.getElementById('uploadFile').parentNode.className = 'draging dragBox';\r\n}\r\n\r\nfunction drop() {\r\n    document.getElementById('uploadFile').parentNode.className = 'dragBox';\r\n}\r\n\r\ndocument.querySelectorAll('.add_post_link a').forEach(function (anchor) {\r\n    anchor.addEventListener('click', function (event) {\r\n        event.preventDefault();\r\n        let clickedAnchorId = event.target.id;\r\n        console.log(clickedAnchorId);\r\n        if (clickedAnchorId === 'post-pic') {\r\n            document.querySelector('.uploadOuter').style.display = 'block';\r\n        } else if (clickedAnchorId === 'post-felling') {\r\n            fetchingApi();\r\n        } else if (clickedAnchorId === 'post-video') {\r\n            document.getElementById('webCam').style.display = 'block';\r\n            let video = document.getElementById(\"vid\");\r\n            let mediaDevices = navigator.mediaDevices;\r\n            video.muted = true;\r\n            mediaDevices\r\n                .getUserMedia({\r\n                    video: true,\r\n                    audio: true,\r\n                })\r\n                .then((stream) => {\r\n                    video.srcObject = stream;\r\n                    video.addEventListener(\"loadedmetadata\", () => {\r\n                        video.play();\r\n                    });\r\n                })\r\n                .catch(alert);\r\n        }\r\n    });\r\n});\r\n\r\n\r\ndocument.getElementById('button_value').onclick = () => {\r\n    let inputValue = document.getElementById('input_value').value;\r\n    preview.style.display = 'none';\r\n    document.querySelector('.uploadOuter').style.display = 'none';\r\n\r\n    let post = {\r\n        id: Date.now(),\r\n        user: {\r\n            name: 'Sajeda Jomaa',\r\n            profileImage: 'assets/images/5.jpg',\r\n        },\r\n        content: inputValue,\r\n        images: previewImgs,\r\n        date: new Date().toISOString(),\r\n    };\r\n\r\n    savePostToLocalStorage(post);\r\n    displayPost(post);\r\n\r\n    previewImgs = [];\r\n    document.getElementById('input_value').value = \"\";\r\n};\r\n\r\nfunction savePostToLocalStorage(post) {\r\n    let posts = JSON.parse(localStorage.getItem('posts')) || [];\r\n    posts.push(post);\r\n    localStorage.setItem('posts', JSON.stringify(posts));\r\n}\r\n\r\nfunction displayPost(post) {\r\n    let add_post_container = document.createElement('div');\r\n    add_post_container.classList.add('add_post_container');\r\n    add_post_container.style.display = 'block';\r\n    add_post_container.dataset.id = post.id;\r\n\r\n    let postContent = `\r\n        <div class=\"post_row\">\r\n            <div class=\"user_profile\">\r\n                <img src=\"${post.user.profileImage}\" alt=\"Profile Image\">\r\n                <div>\r\n                    <p>${post.user.name}</p>\r\n                    <small>${new Date(post.date).toLocaleString()}<small>\r\n                </div>\r\n            </div>\r\n            <a href=\"\"><i class=\"\"></i></a>\r\n            <button class=\"delete_post\" onclick=\"deletePost(${post.id})\">Delete</button>\r\n        </div>\r\n        <p>${post.content}</p>\r\n    `;\r\n\r\n    if (post.images.length > 0) {\r\n        postContent += `<div class=\"post_image_container grid_image_container\">`;\r\n        post.images.forEach(imgSrc => {\r\n            postContent += `<img class=\"post_img\" src=\"${imgSrc}\" alt=\"postImage\">`;\r\n        });\r\n        postContent += `</div>`;\r\n    }\r\n\r\n    postContent += `\r\n        <div class=\"post_row\">\r\n            <div class=\"activity_icon\">\r\n                <div><img src=\"assets/images/like-blue.png\" alt=\"Like Kardo\">290</div>\r\n                <div><img src=\"assets/images/comments.png\" alt=\"Like Kardo\">98</div>\r\n                <div><img src=\"assets/images/share.png\" alt=\"Like Kardo\">9834</div>\r\n            </div>\r\n            <div class=\"post_profile_icon\">\r\n                <img src=\"assets/images/5.jpg\" alt=\"Profile Pic\"> <i class=\"fa fa-caret-down\"></i>\r\n            </div>\r\n        </div>\r\n    `;\r\n\r\n    add_post_container.innerHTML = postContent;\r\n\r\n    if (window.location.href === 'http://localhost:8000/userProfile.html') {\r\n        document.body.querySelector('.post_col').appendChild(add_post_container);\r\n    } else {\r\n        document.body.querySelector('.main_content').appendChild(add_post_container);\r\n    }\r\n}\r\n\r\nfunction deletePost(postId) {\r\n    let posts = JSON.parse(localStorage.getItem('posts')) || [];\r\n    posts = posts.filter(post => post.id !== postId);\r\n    localStorage.setItem('posts', JSON.stringify(posts));\r\n\r\n    let postElement = document.querySelector(`.add_post_container[data-id='${postId}']`);\r\n    if (postElement) {\r\n        postElement.remove();\r\n    }\r\n}\r\n\r\nfunction loadPostsFromLocalStorage() {\r\n    let posts = JSON.parse(localStorage.getItem('posts')) || [];\r\n\r\n    posts.sort((a, b) => new Date(b.date) - new Date(a.date));\r\n\r\n    posts.forEach(post => {\r\n        displayPost(post);\r\n    });\r\n}\r\n\r\ndocument.addEventListener('DOMContentLoaded', loadPostsFromLocalStorage);\r\n\r\nconst emojiSelector = document.getElementById('emojiSelector');\r\n\r\nfunction fetchingApi() {\r\n    emojiSelector.classList.toggle('active');\r\n    emojiSelector.style.display = 'block';\r\n    fetch('https://emoji-api.com/emojis?access_key=8f1226c4f21f2ba77b7c603b0ade575a4271e3b5')\r\n        .then(res => res.json())\r\n        .then(data => loadEmoji(data))\r\n}\r\n\r\nlet selectedEmoji = '';\r\n\r\nfunction loadEmoji(data) {\r\n    data.forEach(emoji => {\r\n        let li = document.createElement('li');\r\n        li.textContent = emoji.character;\r\n        li.addEventListener('click', function () {\r\n            console.log(`Emoji clicked ${emoji.character}`);\r\n            selectedEmoji = emoji.character;\r\n            let inputField = document.getElementById('input_value');\r\n            inputField.value = selectedEmoji + ' ' + inputField.value;\r\n            document.querySelector('.post_text').innerHTML = ` ${emoji.character}`;\r\n        });\r\n        emojiSelector.appendChild(li);\r\n    });\r\n}\r\n\r\nvar settingsMenu = document.querySelector(\".setting_menu\");\r\nvar darkBtn = document.getElementById(\"dark_btn\");\r\n\r\nfunction settingsMenuToggle() {\r\n    settingsMenu.classList.toggle(\"setting_menu_height\");\r\n}\r\ndarkBtn.onclick = function () {\r\n    darkBtn.classList.toggle(\"dark_btn_on\");\r\n}\r\n\r\n//********************************************************* */\r\n// *********************************************************/\r\n//********************************************************* */\r\n//************************************************************* */\r\n$('#input_value').keydown(function () {\r\n    setTimeout(function () {\r\n        var status = $('#input_value').val();\r\n\r\n        var urlRegex = /(\\b(https?|ftp|file):\\/\\/[-A-Z0-9+&@#\\/%?=~_|!:,.;]*[-A-Z0-9+&@#\\/%=~_|])/ig,\r\n            url = status.match(urlRegex);\r\n\r\n        if (url) {\r\n            if (url.length > 0) {\r\n                $('#review').css(\"display\", \"block\");\r\n                $('#review').html('<center><img src=\"https://loading.io/spinners/spinner/index.ajax-spinner-preloader.svg\" class=\"loading\"/></center>');\r\n\r\n                urlReview(url);\r\n\r\n            } else {\r\n                $('#review').css(\"display\", \"none\");\r\n            }\r\n        } else {\r\n            $('#review').css(\"display\", \"none\");\r\n        }\r\n    }, 50);\r\n});\r\n\r\nfunction urlReview(url) {\r\n    var user_agent = \"de6874b9d12bdf50878895da84524018\";\r\n\r\n    $.get(\"https://query.yahooapis.com/v1/public/yql\", {\r\n        q: \"SELECT content FROM data.headers WHERE url=\\\"\" + url + \"\\\" and ua=\\\"\" + user_agent + \"\\\"\",\r\n        format: \"xml\",\r\n        env: \"store://datatables.org/alltableswithkeys\"\r\n    }).done(function (xml) {\r\n\r\n        var html = $(xml).find(\"content\").text();\r\n\r\n        var title = ($(html).filter(\"title\").text() != null && $(html).filter(\"title\").text() != undefined ? $(html).filter(\"title\").text() : ''),\r\n            description = ($(html).filter('meta[name=\"description\"]').attr(\"content\") != null && $(html).filter('meta[name=\"description\"]').attr(\"content\") != undefined ? $(html).filter('meta[name=\"description\"]').attr(\"content\") : ($(html).filter('meta[property=\"og:description\"]').attr(\"content\") != null && $(html).filter('meta[property=\"og:description\"]').attr(\"content\") != undefined ? $(html).filter('meta[property=\"og:description\"]').attr(\"content\") : '')),\r\n            image = ($(html).filter('meta[property=\"og:image\"]').attr(\"content\") != null && $(html).filter('meta[property=\"og:image\"]').attr(\"content\") != undefined ? $(html).filter('meta[property=\"og:image\"]').attr(\"content\") : ($(html).find(\"img:eq(0)\").attr(\"src\") != null && $(html).find(\"img:eq(0)\").attr(\"src\") != undefined ? $(html).find(\"img:eq(0)\").attr(\"src\") : ''));\r\n\r\n        var domain = url.toString().split(\"/\");\r\n\r\n        var review = '<a href=\"' + url + '\" target=\"_BLANK\">'\r\n            + '<img src=\"' + image + '\"/>'\r\n            + '<div><h4>' + title + '</h4>'\r\n            + '<p>' + description + '</p>'\r\n            + '<span>' + domain[2] + '</span></div></a>';\r\n\r\n        if (title != '' || description != '' || image != '') {\r\n            $('#review').html(review);\r\n        }\r\n    });\r\n}\r\n"]}