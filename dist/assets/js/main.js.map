{"version":3,"sources":["infinityScroll.js","post.js"],"names":["let","currentPage","isFetching","hasMore","lastImage","root","document","querySelector","async","fetchData","data","await","fetch","json","console","log","length","forEach","image","div","createElement","classList","add","innerHTML","Date","toLocaleString","download_url","appendChild","window","location","href","body","lastElementChild","observeLastImage","error","observer","IntersectionObserver","entries","isIntersecting","unobserve","threshold","observe","downloadImage","url","filename","then","response","blob","a","URL","createObjectURL","download","click","removeChild","catch","settingsMenu","darkBtn","getElementById","settingsMenuToggle","toggle","onclick","preview","previewImgs","dragNdrop","event","files","target","Array","from","file","reader","FileReader","onload","e","base64Image","result","previewImg","push","setAttribute","readAsDataURL","drag","parentNode","className","drop","savePostToLocalStorage","post","posts","JSON","parse","localStorage","getItem","setItem","stringify","createImageModal","modal","style","display","showImagesInModal","images","gallery","imgSrc","img","src","displayPost","add_post_container","dataset","id","postContent","user","profileImage","name","date","content","index","urlPreview","title","description","domain","querySelectorAll","addEventListener","deletePost","postId","filter","postElement","remove","loadPostsFromLocalStorage","sort","b","anchor","preventDefault","clickedAnchorId","fetchingApi","video","mediaDevices","navigator","muted","getUserMedia","audio","srcObject","stream","play","alert","inputValue","value","now","toISOString","urlData","emojiSelector","emojiList","res","loadEmoji","selectedEmoji","emoji","li","textContent","character","inputField","fetchUrlPreview","$","scrape","access_token","done","review","split","html","fail","keydown","setTimeout","val","match","css"],"mappings":"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","file":"main.js","sourcesContent":["let currentPage = 1;\r\nlet isFetching = false;\r\nlet hasMore = true;\r\nlet lastImage;\r\nconst root = document.querySelector('.fb_body');\r\n\r\nasync function fetchData() {\r\n    if (isFetching || !hasMore) return;\r\n\r\n    isFetching = true;\r\n    try {\r\n        const response = await fetch(`https://picsum.photos/v2/list?page=${currentPage}&limit=10`);\r\n        const data = await response.json();\r\n        console.log(data);\r\n\r\n        if (data.length === 0) {\r\n            hasMore = false;\r\n            return;\r\n        }\r\n        data.forEach(image => {\r\n            const div = document.createElement('div');\r\n            div.classList.add(\"add_post_scrolling\");\r\n            div.innerHTML = `\r\n            <div class=\"post_col\">\r\n                <div class=\"post_row\">\r\n                    <div class=\"user_profile\">\r\n                        <img src=\"assets/images/5.jpg\" alt=\"Profile Picture\">\r\n                        <div>\r\n                            <p class=\"userName\">Sajeda Jomaa</p>\r\n                            <small class=\"date\">${new Date().toLocaleString()}<small>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <p class=\"postContent\">Lorem ipsum dolor sit amet consectetur,</p>\r\n                <div class=\"post_image_container\">\r\n                    <img class=\"post_img\" src=\"${image.download_url}\" alt=\"Post Image\">\r\n                </div>\r\n                <div class=\"post_row\">\r\n                    <div class=\"activity_icon\">\r\n                        <div><img src=\"assets/images/like-blue.png\" alt=\"Like\">290</div>\r\n                        <div><img src=\"assets/images/comments.png\" alt=\"Comments\">98</div>\r\n                        <div><img src=\"assets/images/share.png\" alt=\"Share\">9834</div>\r\n                    </div>\r\n                    <div class=\"post_profile_icon\">\r\n                        <img src=\"assets/images/5.jpg\" alt=\"Profile Pic\"> <i class=\"fa fa-caret-down\"></i>\r\n                    </div>\r\n                </div></div>`;\r\n            // if (window.location.href === 'http://localhost:8000/userProfile.html') {\r\n\r\n            // document.body.querySelector('.post_col').appendChild(div);\r\n\r\n            // } else {\r\n            root.appendChild(div);\r\n            // }\r\n        });\r\n        if (window.location.href === 'http://localhost:8000/userProfile.html') {\r\n            lastImage = document.body.querySelector('.post_col').lastElementChild;\r\n            currentPage++;\r\n            observeLastImage();\r\n\r\n        } else {\r\n            lastImage = root.lastElementChild;\r\n            currentPage++;\r\n            observeLastImage();\r\n        }\r\n\r\n    } catch (error) {\r\n        console.error('Error fetching data:', error);\r\n    } finally {\r\n        isFetching = false;\r\n    }\r\n}\r\n\r\nfunction observeLastImage() {\r\n    const observer = new IntersectionObserver((entries) => {\r\n        if (entries[0].isIntersecting && !isFetching && hasMore) {\r\n            observer.unobserve(lastImage);\r\n            fetchData();\r\n        }\r\n    }, { threshold: 0.01 });\r\n\r\n    if (lastImage) {\r\n        observer.observe(lastImage);\r\n    }\r\n}\r\n\r\nfunction downloadImage(url, filename) {\r\n    fetch(url)\r\n        .then(response => response.blob())\r\n        .then(blob => {\r\n            const a = document.createElement('a');\r\n            a.href = URL.createObjectURL(blob);\r\n            a.download = filename;\r\n            document.body.appendChild(a);\r\n            a.click();\r\n            document.body.removeChild(a);\r\n        })\r\n        .catch(error => console.error('Download failed:', error));\r\n}\r\n\r\nfetchData();\r\n\r\n","\"use strict\";\r\n\r\nvar settingsMenu = document.querySelector(\".setting_menu\");\r\nvar darkBtn = document.getElementById(\"dark_btn\");\r\n\r\nfunction settingsMenuToggle() {\r\n    settingsMenu.classList.toggle(\"setting_menu_height\");\r\n}\r\n\r\ndarkBtn.onclick = function () {\r\n    darkBtn.classList.toggle(\"dark_btn_on\");\r\n};\r\n\r\nlet preview = document.getElementById(\"preview\");\r\nlet previewImgs = [];\r\n\r\nfunction dragNdrop(event) {\r\n    let files = event.target.files;\r\n    if (files.length > 0) {\r\n        Array.from(files).forEach(file => {\r\n            let reader = new FileReader();\r\n            reader.onload = function (e) {\r\n                let base64Image = e.target.result;\r\n                previewImgs.push(base64Image);\r\n\r\n                let previewImg = document.createElement(\"img\");\r\n                previewImg.setAttribute(\"src\", base64Image);\r\n                preview.appendChild(previewImg);\r\n            };\r\n            reader.readAsDataURL(file);\r\n        });\r\n    }\r\n}\r\n\r\nfunction drag() {\r\n    document.getElementById('uploadFile').parentNode.className = 'draging dragBox';\r\n}\r\n\r\nfunction drop() {\r\n    document.getElementById('uploadFile').parentNode.className = 'dragBox';\r\n}\r\n\r\ndocument.querySelectorAll('.add_post_link a').forEach(function (anchor) {\r\n    anchor.addEventListener('click', function (event) {\r\n        event.preventDefault();\r\n        let clickedAnchorId = event.target.id;\r\n        console.log(clickedAnchorId);\r\n        if (clickedAnchorId === 'post-pic') {\r\n            document.querySelector('.uploadOuter').style.display = 'block';\r\n        } else if (clickedAnchorId === 'post-felling') {\r\n            fetchingApi();\r\n        } else if (clickedAnchorId === 'post-video') {\r\n            document.getElementById('webCam').style.display = 'block';\r\n            let video = document.getElementById(\"vid\");\r\n            let mediaDevices = navigator.mediaDevices;\r\n            video.muted = true;\r\n            mediaDevices\r\n                .getUserMedia({\r\n                    video: true,\r\n                    audio: true,\r\n                })\r\n                .then((stream) => {\r\n                    video.srcObject = stream;\r\n                    video.addEventListener(\"loadedmetadata\", () => {\r\n                        video.play();\r\n                    });\r\n                })\r\n                .catch(alert);\r\n        }\r\n    });\r\n});\r\n\r\ndocument.getElementById('button_value').onclick = () => {\r\n    let inputValue = document.getElementById('input_value').value;\r\n    preview.style.display = 'none';\r\n    document.querySelector('.uploadOuter').style.display = 'none';\r\n\r\n    let post = {\r\n        id: Date.now(),\r\n        user: {\r\n            name: 'Sajeda Jomaa',\r\n            profileImage: 'assets/images/5.jpg',\r\n        },\r\n        content: inputValue,\r\n        images: previewImgs,\r\n        date: new Date().toISOString(),\r\n        urlPreview: {\r\n            url: urlData.url,\r\n            title: urlData.title,\r\n            description: urlData.description,\r\n            image: urlData.image,\r\n            domain: urlData.domain\r\n        }\r\n    };\r\n\r\n    savePostToLocalStorage(post);\r\n    displayPost(post);\r\n\r\n    previewImgs = [];\r\n    document.getElementById('input_value').value = \"\";\r\n};\r\n\r\n\r\nfunction savePostToLocalStorage(post) {\r\n    let posts = JSON.parse(localStorage.getItem('posts')) || [];\r\n    posts.push(post);\r\n    localStorage.setItem('posts', JSON.stringify(posts));\r\n}\r\n\r\n\r\n\r\nfunction createImageModal() {\r\n    let modal = document.createElement('div');\r\n    modal.classList.add('image-modal');\r\n    modal.innerHTML = `\r\n        <div class=\"image-modal-content\">\r\n            <span class=\"close\">&times;</span>\r\n            <div class=\"image-gallery\"></div>\r\n        </div>\r\n    `;\r\n    document.body.appendChild(modal);\r\n\r\n    modal.querySelector('.close').onclick = function () {\r\n        modal.style.display = 'none';\r\n    };\r\n\r\n    modal.onclick = function (event) {\r\n        if (event.target === modal) {\r\n            modal.style.display = 'none';\r\n        }\r\n    };\r\n}\r\n\r\ncreateImageModal();\r\n\r\nfunction showImagesInModal(images) {\r\n    let modal = document.querySelector('.image-modal');\r\n    let gallery = modal.querySelector('.image-gallery');\r\n    gallery.innerHTML = '';\r\n\r\n    images.forEach(imgSrc => {\r\n        let img = document.createElement('img');\r\n        img.src = imgSrc;\r\n        gallery.appendChild(img);\r\n    });\r\n\r\n    modal.style.display = 'block';\r\n}\r\n\r\nfunction displayPost(post) {\r\n    let add_post_container = document.createElement('div');\r\n    add_post_container.classList.add('add_post_container');\r\n    add_post_container.style.display = 'block';\r\n    add_post_container.dataset.id = post.id;\r\n\r\n    let postContent = `\r\n        <div class=\"post_row\">\r\n            <div class=\"user_profile\">\r\n                <img src=\"${post.user.profileImage}\" alt=\"Profile Image\">\r\n                <div>\r\n                    <p class=\"userName\">${post.user.name}</p>\r\n                    <p class=\"date\"><small>${new Date(post.date).toLocaleString()}</small></p>\r\n                </div>\r\n            </div>\r\n            <a href=\"\"><i class=\"\"></i></a>\r\n            <button class=\"delete_post\" onclick=\"deletePost(${post.id})\">Delete</button>\r\n            </div>\r\n        <p class=\"postContent\">${post.content}</p>\r\n    `;\r\n\r\n    if (post.images.length > 0) {\r\n        postContent += `<div class=\"post_image_container grid_image_container\">`;\r\n        post.images.forEach((imgSrc, index) => {\r\n            if (index < 3) {\r\n                postContent += `<img class=\"post_img\" src=\"${imgSrc}\" alt=\"postImage\" onclick=\"showImagesInModal(${JSON.stringify(post.images)})\">`;\r\n            } else if (index === 3) {\r\n                postContent += `\r\n                    <div class=\"more_images\">\r\n                        <img class=\"post_img\" src=\"${imgSrc}\" alt=\"postImage\">\r\n                        <div class=\"more_overlay\">+${post.images.length - 4}</div>\r\n                    </div>\r\n                `;\r\n            }\r\n        });\r\n        postContent += `</div>`;\r\n    }\r\n\r\n    if (post.urlPreview && post.urlPreview.url) {\r\n        postContent += `\r\n            <div class=\"url_preview\">\r\n                <a href=\"${post.urlPreview.url}\" target=\"_BLANK\">\r\n                    <img src=\"${post.urlPreview.image}\" alt=\"Preview Image\"/>\r\n                    <div>\r\n                        <h4>${post.urlPreview.title}</h4>\r\n                        <p>${post.urlPreview.description}</p>\r\n                        <span>${post.urlPreview.domain}</span>\r\n                    </div>\r\n                </a>\r\n            </div>\r\n        `;\r\n    }\r\n\r\n    postContent += `\r\n        <div class=\"post_row\">\r\n            <div class=\"activity_icon\">\r\n                <div><img src=\"assets/images/like-blue.png\" alt=\"Like\">290</div>\r\n                <div><img src=\"assets/images/comments.png\" alt=\"Comments\">98</div>\r\n                <div><img src=\"assets/images/share.png\" alt=\"Share\">9834</div>\r\n            </div>\r\n            <div class=\"post_profile_icon\">\r\n                <img src=\"assets/images/5.jpg\" alt=\"Profile Pic\"> <i class=\"fa fa-caret-down\"></i>\r\n            </div>\r\n        </div>\r\n    `;\r\n\r\n    add_post_container.innerHTML = postContent;\r\n\r\n    if (window.location.href === 'http://localhost:8000/userProfile.html') {\r\n        document.body.querySelector('.post_col').appendChild(add_post_container);\r\n    } else {\r\n        document.body.querySelector('.main_content').appendChild(add_post_container);\r\n    }\r\n    add_post_container.querySelectorAll('.post_img').forEach(img => {\r\n        img.addEventListener('click', function () {\r\n            showImagesInModal(post.images);\r\n        });\r\n    });\r\n}\r\n\r\n\r\nfunction deletePost(postId) {\r\n    let posts = JSON.parse(localStorage.getItem('posts')) || [];\r\n    posts = posts.filter(post => post.id !== postId);\r\n    localStorage.setItem('posts', JSON.stringify(posts));\r\n\r\n    let postElement = document.querySelector(`.add_post_container[data-id='${postId}']`);\r\n    if (postElement) {\r\n        postElement.remove();\r\n    }\r\n}\r\n\r\nfunction loadPostsFromLocalStorage() {\r\n    let posts = JSON.parse(localStorage.getItem('posts')) || [];\r\n\r\n    posts.sort((a, b) => new Date(b.date) - new Date(a.date));\r\n\r\n    posts.forEach(post => {\r\n        displayPost(post);\r\n    });\r\n}\r\n\r\ndocument.addEventListener('DOMContentLoaded', () => {\r\n    loadPostsFromLocalStorage();\r\n});\r\n\r\nconst emojiSelector = document.getElementById('emojiSelector');\r\nconst emojiList = document.getElementById('emojiList');\r\n\r\nfunction fetchingApi() {\r\n    emojiSelector.classList.toggle('active');\r\n    emojiSelector.style.display = 'block';\r\n    fetch('https://emoji-api.com/emojis?access_key=8f1226c4f21f2ba77b7c603b0ade575a4271e3b5')\r\n        .then(res => res.json())\r\n        .then(data => loadEmoji(data));\r\n}\r\n\r\nlet selectedEmoji = '';\r\n\r\nfunction loadEmoji(data) {\r\n    emojiList.innerHTML = '';\r\n    data.forEach(emoji => {\r\n        let li = document.createElement('li');\r\n        li.textContent = emoji.character;\r\n        li.addEventListener('click', function () {\r\n            console.log(`Emoji clicked ${emoji.character} `);\r\n            selectedEmoji = emoji.character;\r\n            let inputField = document.getElementById('input_value');\r\n            inputField.value = selectedEmoji + ' ' + inputField.value;\r\n            document.querySelector('.post_text').innerHTML = ` ${emoji.character} `;\r\n        });\r\n        emojiList.appendChild(li);\r\n    });\r\n}\r\nlet urlData = {};\r\n\r\n$('#input_value').keydown(function () {\r\n    setTimeout(function () {\r\n        let status = $('#input_value').val();\r\n\r\n        let urlRegex = /(\\b(https?|ftp|file):\\/\\/[-A-Z0-9+&@#\\/%?=~_|!:,.;]*[-A-Z0-9+&@#\\/%=~_|])/ig,\r\n            url = status.match(urlRegex);\r\n\r\n        if (url) {\r\n            if (url.length > 0) {\r\n                $('#demo').css(\"display\", \"block\");\r\n                $('#review').css(\"display\", \"block\");\r\n                $('#review').html('<center><img src=\"https://loading.io/spinners/spinner/index.ajax-spinner-preloader.gif\" class=\"loading\"/>');\r\n\r\n                fetchUrlPreview(url[0]);\r\n            } else {\r\n                $('#review').css(\"display\", \"none\");\r\n            }\r\n        } else {\r\n            $('#review').css(\"display\", \"none\");\r\n        }\r\n    }, 50);\r\n});\r\n\r\nfunction fetchUrlPreview(url) {\r\n    let access_token = \"EAAiYtZBMt3wABOZCMYY44ya5dtvA4SJAFxd2MqZCZBJNTseanjNcg2H8Hl6yYT0IKEJpCEugHaNbVE1NokKfEtXbf4zcUZCRlS2lhqxXSkW7LdK192KkeKXMY5brDQQD3PYQOZBzA4kKyOuvZAlPE93Rc4ep3RbqSXkZBxGk8UWGxzzml8V19xbaMsCzgrjOv0uZAlTmZCJ74Dbfi9a5UT8SvcLogoS8xVdTDrRAZDZD\";\r\n\r\n    $.post(\"https://graph.facebook.com/v20.0/\", {\r\n        id: url,\r\n        scrape: true,\r\n        access_token: access_token\r\n    }).done(function (response) {\r\n        if (response) {\r\n            let title = response.title || '',\r\n                description = response.description || '',\r\n                image = response.image[0] ? response.image[0].url : '',\r\n                domain = url.split(\"/\");\r\n\r\n            let review = '<a href=\"' + url + '\" target=\"_BLANK\">'\r\n                + '<img src=\"' + image + '\"/>'\r\n                + '<div><h4>' + title + '</h4>'\r\n                + '<p>' + description + '</p>'\r\n                + '<span>' + domain[2] + '</span></div></a>';\r\n\r\n            if (title || description || image) {\r\n                $('#review').html(review);\r\n            } else {\r\n                $('#review').html('<p>No preview available.</p>');\r\n            }\r\n\r\n            urlData = {\r\n                url: url,\r\n                title: title,\r\n                description: description,\r\n                image: image,\r\n                domain: domain[2]\r\n            };\r\n        } else {\r\n            $('#review').html('<p>Unable to fetch preview.</p>');\r\n        }\r\n    }).fail(function () {\r\n        $('#review').html('<p>Error fetching preview.</p>');\r\n    });\r\n}"]}
